#!/usr/bin/env python3

import sys;
import minimalmodbus
import struct
from shutil import copyfile

instrument = minimalmodbus.Instrument('/dev/ttyUSB2', 1, mode='rtu',close_port_after_each_call=False,debug=True) # port name, slave address (in decimal)
#instrument = minimalmodbus.Instrument('/dev/ttyUSB0', 1) # port name, slave address (in decimal)

#sys.stdout=open('/tmp/pwm-data.tmp', 'w')

instrument.serial.baudrate = 9600   # Baud
instrument.serial.timeout  = 1   # seconds

def convert_in_float(value1, value2):
        raw = struct.pack('>HH',value1,value2)
        ans = struct.unpack('>f', raw)[0]
        return ans

print("voltage3=" + instrument.read_float(0))
